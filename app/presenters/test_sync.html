<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Sync System</title>
</head>
<body>
    <h1>Test Sistema de Sincronizaci√≥n</h1>
    <div id="output"></div>
    
    <script>
        console.log('üîç Probando sistema de sincronizaci√≥n...');
        
        // Simular una petici√≥n al endpoint
        const userId = 1; // Usuario de prueba
        const ultimoId = 0;
        const ultimaActualizacion = '2024-01-01 00:00:00';
        
        const url = `verificar_nuevos_mensajes.php?user=${userId}&ultimo_id=${ultimoId}&ultima_actualizacion=${encodeURIComponent(ultimaActualizacion)}`;
        
        console.log('üéØ URL de prueba:', url);
        
        fetch(url)
            .then(response => {
                console.log('üì° Status:', response.status);
                return response.text();
            })
            .then(text => {
                console.log('üìÑ Respuesta cruda:', text);
                document.getElementById('output').innerHTML = '<pre>' + text + '</pre>';
                
                try {
                    const data = JSON.parse(text);
                    console.log('üìä Datos parseados:', data);
                } catch(e) {
                    console.error('‚ùå Error parsing JSON:', e);
                }
            })
            .catch(error => {
                console.error('‚ùå Error en fetch:', error);
                document.getElementById('output').innerHTML = 'Error: ' + error.message;
            });
    </script>
</body>
</html>