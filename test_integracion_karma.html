<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üèÜ Test Integraci√≥n Karma - Converza</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <style>
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 30px 0;
        }
        .test-header {
            background: white;
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            text-align: center;
        }
        .component-card {
            background: white;
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 4px 16px rgba(0,0,0,0.1);
        }
        .status-badge {
            display: inline-block;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9rem;
            margin: 5px;
        }
        .status-complete {
            background: #28a745;
            color: white;
        }
        .status-testing {
            background: #ffc107;
            color: #000;
        }
        .demo-navbar {
            background: #007bff;
            padding: 15px;
            border-radius: 12px;
            color: white;
            margin-bottom: 15px;
        }
        .karma-demo-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 6px 12px;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.3), rgba(118, 75, 162, 0.3));
            border: 2px solid rgba(255, 255, 255, 0.5);
            border-radius: 20px;
            color: white;
            font-weight: 600;
            text-decoration: none;
            font-size: 0.9rem;
        }
        .notification-demo {
            width: 350px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 8px 24px rgba(102,126,234,0.4);
            margin: 20px auto;
        }
        .feature-list {
            list-style: none;
            padding: 0;
        }
        .feature-list li {
            padding: 12px;
            margin: 8px 0;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }
        .test-button {
            background: linear-gradient(135deg, #667eea, #764ba2);
            border: none;
            color: white;
            padding: 12px 30px;
            border-radius: 25px;
            font-weight: 600;
            text-decoration: none;
            display: inline-block;
            margin: 10px;
            transition: transform 0.3s ease;
        }
        .test-button:hover {
            transform: scale(1.05);
            color: white;
        }
        .code-block {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.85rem;
            overflow-x: auto;
        }
        .tienda-preview {
            border: 2px dashed #dee2e6;
            padding: 20px;
            border-radius: 12px;
            margin: 15px 0;
        }
        .recompensa-mini {
            display: inline-block;
            width: 80px;
            height: 100px;
            background: white;
            border: 2px solid #28a745;
            border-radius: 12px;
            margin: 5px;
            padding: 10px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .checklist {
            list-style: none;
            padding: 0;
        }
        .checklist li {
            padding: 10px;
            margin: 5px 0;
            background: white;
            border-radius: 8px;
            display: flex;
            align-items: center;
        }
        .checklist li::before {
            content: '‚úÖ';
            font-size: 1.5rem;
            margin-right: 15px;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="test-header">
            <h1 class="display-4 fw-bold mb-3">
                üèÜ Sistema de Gamificaci√≥n Karma
            </h1>
            <p class="lead text-muted">Integraci√≥n Completa - Testing & Verificaci√≥n</p>
            <div class="mt-4">
                <span class="status-badge status-complete">‚úì Karma Navbar Button</span>
                <span class="status-badge status-complete">‚úì Notification Widget</span>
                <span class="status-badge status-complete">‚úì Tienda de Recompensas</span>
            </div>
        </div>

        <!-- Componente 1: Karma Navbar Button -->
        <div class="component-card">
            <h2 class="mb-4">
                <i class="bi bi-trophy-fill text-warning"></i> 
                1. Karma Navbar Button
            </h2>
            
            <p class="text-muted">Bot√≥n compacto visible en el navbar principal que muestra el karma en tiempo real</p>
            
            <div class="demo-navbar">
                <div class="d-flex justify-content-between align-items-center">
                    <strong>Converza</strong>
                    <div class="d-flex gap-3 align-items-center">
                        <a href="#" class="karma-demo-btn">
                            <span style="font-size:1.2rem;">üå±</span>
                            <span style="font-weight:700;">150</span>
                            <span style="font-size:0.7rem;background:rgba(255,255,255,0.2);padding:2px 6px;border-radius:10px;">Nv. 2</span>
                        </a>
                        <span>üè† üì± üîî</span>
                    </div>
                </div>
            </div>
            
            <h5 class="mt-4 mb-3">Caracter√≠sticas:</h5>
            <ul class="feature-list">
                <li><i class="bi bi-check-circle-fill text-success me-2"></i> Emoji din√°mico por nivel (üå±‚≠ê‚ú®üí´üëë)</li>
                <li><i class="bi bi-check-circle-fill text-success me-2"></i> Contador animado en tiempo real</li>
                <li><i class="bi bi-check-circle-fill text-success me-2"></i> Efecto pulse cuando hay cambios</li>
                <li><i class="bi bi-check-circle-fill text-success me-2"></i> Enlace directo a tienda de recompensas</li>
                <li><i class="bi bi-check-circle-fill text-success me-2"></i> Responsive para m√≥viles</li>
            </ul>
            
            <h5 class="mt-4 mb-3">Archivo:</h5>
            <div class="code-block">
app/view/components/karma-navbar-badge.php
            </div>
            
            <a href="/Converza/app/view/index.php" class="test-button mt-3">
                <i class="bi bi-box-arrow-up-right"></i> Probar en Sitio Real
            </a>
        </div>

        <!-- Componente 2: Notification Widget -->
        <div class="component-card">
            <h2 class="mb-4">
                <i class="bi bi-bell-fill text-primary"></i> 
                2. Karma Notification Widget
            </h2>
            
            <p class="text-muted">Notificaci√≥n flotante autom√°tica que aparece cuando el usuario gana o pierde karma</p>
            
            <div class="notification-demo text-white">
                <div class="d-flex align-items-center gap-3 mb-3">
                    <div style="font-size:3rem;">‚≠ê</div>
                    <div class="flex-grow-1">
                        <h5 class="mb-1">¬°Karma Ganado!</h5>
                        <p class="mb-2 small">Has recibido puntos por tu comentario positivo</p>
                        <span style="background:rgba(255,255,255,0.3);padding:5px 15px;border-radius:20px;font-weight:700;">+8</span>
                    </div>
                    <button style="background:transparent;border:none;color:white;font-size:1.5rem;">√ó</button>
                </div>
                <div style="height:4px;background:rgba(255,255,255,0.3);border-radius:2px;overflow:hidden;">
                    <div style="height:100%;background:white;width:70%;border-radius:2px;"></div>
                </div>
            </div>
            
            <h5 class="mt-4 mb-3">Funcionalidades:</h5>
            <ul class="feature-list">
                <li><i class="bi bi-check-circle-fill text-success me-2"></i> Auto-display desde $_SESSION</li>
                <li><i class="bi bi-check-circle-fill text-success me-2"></i> Animaci√≥n slideInRight</li>
                <li><i class="bi bi-check-circle-fill text-success me-2"></i> Duraci√≥n: 5 segundos</li>
                <li><i class="bi bi-check-circle-fill text-success me-2"></i> Sonido opcional (Web Audio API)</li>
                <li><i class="bi bi-check-circle-fill text-success me-2"></i> Actualiza navbar autom√°ticamente</li>
                <li><i class="bi bi-check-circle-fill text-success me-2"></i> Estilos diferentes para karma +/-</li>
            </ul>
            
            <h5 class="mt-4 mb-3">Integraci√≥n con Helper:</h5>
            <div class="code-block">
// En karma-social-helper.php
if ($resultado && $puntos != 0) {
    $_SESSION['karma_notification'] = [
        'puntos' => $puntos,
        'tipo' => 'positivo',
        'mensaje' => '¬°Comentario positivo!'
    ];
}
            </div>
            
            <button onclick="alert('En el sitio real: Haz un comentario positivo y recarga la p√°gina para ver la notificaci√≥n')" class="test-button mt-3">
                <i class="bi bi-lightbulb"></i> C√≥mo Probar
            </button>
        </div>

        <!-- Componente 3: Tienda -->
        <div class="component-card">
            <h2 class="mb-4">
                <i class="bi bi-shop text-success"></i> 
                3. Tienda de Recompensas
            </h2>
            
            <p class="text-muted">Sistema completo donde usuarios pueden desbloquear y equipar recompensas con su karma</p>
            
            <div class="tienda-preview">
                <h4 class="text-center mb-4">Vista Previa de Recompensas</h4>
                <div class="text-center">
                    <div class="recompensa-mini">
                        <div style="font-size:2rem;">üé®</div>
                        <small class="fw-bold">Tema Oscuro</small>
                        <div style="font-size:0.7rem;color:#667eea;font-weight:600;">50 karma</div>
                    </div>
                    <div class="recompensa-mini" style="border-color:#667eea;">
                        <div style="font-size:2rem;">üñºÔ∏è</div>
                        <small class="fw-bold">Marco Gold</small>
                        <div style="font-size:0.7rem;color:#667eea;font-weight:600;">‚úì Equipada</div>
                    </div>
                    <div class="recompensa-mini" style="opacity:0.6;border-color:#ccc;">
                        <div style="font-size:2rem;">üèÖ</div>
                        <small class="fw-bold">Insignia VIP</small>
                        <div style="font-size:0.7rem;color:#999;">üîí 500 karma</div>
                    </div>
                    <div class="recompensa-mini">
                        <div style="font-size:2rem;">‚≠ê</div>
                        <small class="fw-bold">√çcono Estrella</small>
                        <div style="font-size:0.7rem;color:#667eea;font-weight:600;">100 karma</div>
                    </div>
                    <div class="recompensa-mini">
                        <div style="font-size:2rem;">üåà</div>
                        <small class="fw-bold">Color Rainbow</small>
                        <div style="font-size:0.7rem;color:#667eea;font-weight:600;">120 karma</div>
                    </div>
                </div>
            </div>
            
            <h5 class="mt-4 mb-3">Categor√≠as (24 Recompensas):</h5>
            <ul class="feature-list">
                <li>üé® <strong>Temas:</strong> 4 temas (50-200 karma)</li>
                <li>üñºÔ∏è <strong>Marcos de Perfil:</strong> 5 marcos (30-500 karma)</li>
                <li>üèÖ <strong>Insignias:</strong> 6 insignias (10-1000 karma)</li>
                <li>‚≠ê <strong>√çconos Especiales:</strong> 4 √≠conos (75-200 karma)</li>
                <li>üåà <strong>Colores de Nombre:</strong> 4 colores (60-120 karma)</li>
                <li>üéÅ <strong>Stickers BONUS:</strong> 5 stickers (25-100 karma)</li>
            </ul>
            
            <h5 class="mt-4 mb-3">Estados:</h5>
            <div class="row">
                <div class="col-md-6">
                    <div style="padding:15px;background:#f8f9fa;border-radius:8px;margin-bottom:10px;">
                        <strong>üîí Bloqueada:</strong> Karma insuficiente
                    </div>
                    <div style="padding:15px;background:#fff;border:2px solid #28a745;border-radius:8px;margin-bottom:10px;">
                        <strong style="color:#28a745;">‚úì Desbloqueada:</strong> Puede equiparse
                    </div>
                </div>
                <div class="col-md-6">
                    <div style="padding:15px;background:#fff;border-radius:8px;margin-bottom:10px;">
                        <strong>üîì Desbloqueable:</strong> Karma suficiente
                    </div>
                    <div style="padding:15px;background:linear-gradient(135deg,rgba(102,126,234,0.1),rgba(118,75,162,0.1));border:2px solid #667eea;border-radius:8px;">
                        <strong style="color:#667eea;">‚ö° Equipada:</strong> Activa en perfil
                    </div>
                </div>
            </div>
            
            <a href="/Converza/app/presenters/karma_tienda.php" class="test-button mt-3">
                <i class="bi bi-shop"></i> Abrir Tienda
            </a>
        </div>

        <!-- Flujo Completo -->
        <div class="component-card">
            <h2 class="mb-4">
                <i class="bi bi-diagram-3-fill text-info"></i> 
                Flujo Completo del Sistema
            </h2>
            
            <div class="row">
                <div class="col-md-4 mb-3">
                    <div style="background:#667eea;color:white;padding:20px;border-radius:12px;text-align:center;">
                        <h4>1. Acci√≥n</h4>
                        <p class="small mb-0">Usuario comenta positivo</p>
                    </div>
                    <div class="text-center my-2">‚¨áÔ∏è</div>
                </div>
                <div class="col-md-4 mb-3">
                    <div style="background:#764ba2;color:white;padding:20px;border-radius:12px;text-align:center;">
                        <h4>2. Registro</h4>
                        <p class="small mb-0">Helper registra +8 karma</p>
                    </div>
                    <div class="text-center my-2">‚¨áÔ∏è</div>
                </div>
                <div class="col-md-4 mb-3">
                    <div style="background:#28a745;color:white;padding:20px;border-radius:12px;text-align:center;">
                        <h4>3. Sesi√≥n</h4>
                        <p class="small mb-0">Guarda notificaci√≥n</p>
                    </div>
                    <div class="text-center my-2">‚¨áÔ∏è</div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-4 mb-3">
                    <div style="background:#ffc107;color:#000;padding:20px;border-radius:12px;text-align:center;">
                        <h4>4. Display</h4>
                        <p class="small mb-0">Widget muestra notificaci√≥n</p>
                    </div>
                </div>
                <div class="col-md-4 mb-3">
                    <div style="background:#17a2b8;color:white;padding:20px;border-radius:12px;text-align:center;">
                        <h4>5. Actualiza</h4>
                        <p class="small mb-0">Navbar actualizado via AJAX</p>
                    </div>
                </div>
                <div class="col-md-4 mb-3">
                    <div style="background:#6f42c1;color:white;padding:20px;border-radius:12px;text-align:center;">
                        <h4>6. Tienda</h4>
                        <p class="small mb-0">Usuario puede gastar karma</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Checklist -->
        <div class="component-card">
            <h2 class="mb-4">
                <i class="bi bi-clipboard-check text-success"></i> 
                Checklist de Verificaci√≥n
            </h2>
            
            <ul class="checklist">
                <li>Bot√≥n de karma visible en navbar principal</li>
                <li>Notificaciones aparecen autom√°ticamente</li>
                <li>Tienda de recompensas accesible</li>
                <li>Desbloqueo de recompensas funcional</li>
                <li>Equipar/desequipar funcional</li>
                <li>Comentarios clicables a perfiles</li>
                <li>Avatares sin errores 404</li>
                <li>Personalizaci√≥n visible en perfiles</li>
                <li>Animaciones fluidas</li>
                <li>Responsive en m√≥viles</li>
            </ul>
        </div>

        <!-- Links de Testing -->
        <div class="component-card text-center">
            <h2 class="mb-4">
                <i class="bi bi-rocket-takeoff text-primary"></i> 
                Enlaces R√°pidos de Testing
            </h2>
            
            <div class="row">
                <div class="col-md-6">
                    <a href="/Converza/app/view/index.php" class="test-button w-100 mb-3">
                        <i class="bi bi-house-door"></i> Ver Feed Principal
                    </a>
                    <a href="/Converza/app/presenters/karma_tienda.php" class="test-button w-100 mb-3">
                        <i class="bi bi-shop"></i> Abrir Tienda de Karma
                    </a>
                </div>
                <div class="col-md-6">
                    <a href="/Converza/test_comentarios_clicables.html" class="test-button w-100 mb-3">
                        <i class="bi bi-chat-dots"></i> Test Comentarios
                    </a>
                    <a href="/Converza/INTEGRACION_KARMA_COMPLETA.md" class="test-button w-100 mb-3">
                        <i class="bi bi-file-text"></i> Ver Documentaci√≥n
                    </a>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="text-center mt-4 mb-4">
            <p class="text-white">
                <i class="bi bi-github"></i> Desarrollado por <strong>GitHub Copilot</strong>
            </p>
            <p class="text-white-50 small">
                Converza Social Network - Sistema de Gamificaci√≥n v2.0
            </p>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
